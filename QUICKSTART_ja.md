# クイックスタートガイド - OSS学習プラットフォーム

このガイドでは、5分でOSSコミットの分析を始められます。

## インストール（2分）

### ステップ1：リポジトリをクローン

```bash
git clone https://github.com/Kuroakira/deep-code-reader.git
cd deep-code-reader
```

### ステップ2：インストーラーを実行

```bash
./install.sh
```

インストーラーが実行すること：
1. ✅ 依存関係のチェック（Node.js、Python、npm）
2. 📦 MCPサーバーのインストール（既存のインストールを自動検出）
   - 既にインストール済みのサーバーはスキップ
   - オプションのMCPサーバーを提供（対話的）
3. ⚙️  Claude Codeの設定
4. 🎯 スキルとコマンドのインストール
5. 🔐 Notion統合のセットアップ

### ステップ3：Notionセットアップ（推奨）

**インストール中に、YESと回答：**

インストーラーが以下を尋ねます：
```
Setup Notion integration now? (y/n)
```

**y**を押して今すぐセットアップ：
1. https://www.notion.so/profile/integrations にアクセス
2. "Deep Code Reader"というインテグレーションを作成
3. Internal Integration Secretをコピー
4. インストーラーに貼り付け
5. ワークスペースページへのアクセスを付与：
   - インテグレーション設定に移動
   - 「アクセス」タブをクリック
   - 「アクセス権限を編集」をクリック
   - ワークスペースページを選択
6. 完了！MCPが自動的に設定されます

## Notionセットアップの完了（1分）

### インストール後

インストール中にAPIキーを設定した場合：

```bash
claude-code

# セットアップウィザードを実行
/setup-notion
```

**ウィザードが実行すること：**

1. **既存のAPIキーを検出** - 既に設定済み！

2. **ワークスペースページを尋ねる**
   - アクセスを付与したページのURLを入力
   - （インテグレーション設定で選択したページ）

3. **OSSリストデータベースを自動作成** ✨
   - マスター「OSSリスト」データベースを作成
   - OSSごとに個別の「Commits & PRs」データベースを作成
   - インテグレーションとデータベースを共有

4. **完了！**
   ```
   ✅ Notion統合が完了しました！

   📋 設定：
     • ワークスペース：Code Analysis Workspace
     • OSSリスト：https://notion.so/...

   🚀 次：/register-oss <github-url>
     （これによりOSS固有のCommits & PRsデータベースが作成されます）
   ```

---

## 初回分析（1分）

### ステップ1：Claude Codeを起動

```bash
claude-code
```

### ステップ2：OSSリポジトリを登録

```
/register-oss https://github.com/expressjs/express
```

**実行されること：**
- ✅ OSSリストデータベースにエントリを作成
- ✅ リポジトリメタデータを取得
- ✅ NotionページURLを返す

**出力：**
```
✅ OSSリポジトリが登録されました！

📦 プロジェクト：Express.js
🔗 GitHub：https://github.com/expressjs/express
📄 Notion：https://notion.so/Express-js-abc123

💡 次：/analyze-commit <url> <commit-hash>
```

### ステップ3：コミットを分析

```
/analyze-commit https://github.com/expressjs/express abc1234567
```

**実行されること：**
- 📥 GitHubからコミットデータを取得
- 🔍 関連するissueを抽出
- 🧠 AIで分析（Sequential Thinking + Serena MCP）
- 📊 コンソールに詳細な分析を表示
- 💾 Notionに自動的にエクスポート

**コンソール出力：**
```
📊 コミット分析：abc1234

## 🎯 変更の意図（Why）
認証ミドルウェアのセキュリティ脆弱性を修正

## 📝 変更内容（What）
変更されたファイル：3件
- src/auth/middleware.js (+45, -12)
- src/auth/validator.js (+23, -5)
- test/auth.test.js (+67, -0)

## 🏗️ 影響範囲（Impact）
影響を受けるモジュール：10ファイル
✅ 破壊的変更なし

## 🎨 設計意図（Design）
Chain of Responsibilityパターン
トレードオフ：メモリ+2MBでセキュリティ10倍向上

## 🔗 コンテキスト
関連Issue：#1234、#1235
PR：#5234（5件のレビュー）

✅ Notionにエクスポート済み：https://notion.so/commit-abc123
```

### ステップ4：Notionを確認

Notionページを開いて以下を確認：
- ✅ 完全な構造化された分析
- ✅ シンタックスハイライト付きコード差分
- ✅ 全てのコンテキスト（issue、コミット、PR）
- ✅ メモフィールド（あなたのメモ用）

---

## 高度な使い方

### プルリクエストの分析

```
/analyze-pr https://github.com/expressjs/express/pull/5234
```

PR内の全てのコミットを分析：
- 全てのコミットをリスト表示
- 選択：全て、特定のもの、またはサマリーのみ
- 各コミットの個別ページを作成
- Notionでリンク

### 複数のコミットを比較

```
/analyze-commit <url> <commit1>
/analyze-commit <url> <commit2>
/analyze-commit <url> <commit3>
```

Notionデータベースで変更のタイムラインを構築。

### 特定の側面に焦点を当てる

```
/analyze-commit <url> <commit> --focus security
/analyze-commit <url> <commit> --focus performance
```

ターゲットを絞った分析を取得。

---

## 学習のためのヒント

### 1. 小さく始める
- 小さく焦点を絞ったコミット（変更されたファイルが5件未満）を選ぶ
- より大きなものに移る前に、完全に理解する

### 2. 機能を追う
- 興味のある機能を見つける
- それに関連する全てのコミットを分析
- 時間とともにどのように進化したかを確認

### 3. パターンを研究
- 繰り返される設計パターンを探す
- 経験豊富な開発者がどのように変更を構造化するかに注目
- コミットメッセージから学ぶ

### 4. メモフィールドを活用
- Notionに自分の洞察を追加
- 後で探求する質問をメモ
- 関連するコミットをリンク

### 5. データベースを構築
- 一貫してコミットを分析
- 個人的なナレッジベースを作成
- 定期的にメモを見直す

---

## トラブルシューティング

### 「リポジトリが登録されていません」

```
⚠️  リポジトリが登録されていません

実行：/register-oss <url>
```

**解決策**：まず`/register-oss`でリポジトリを登録してください。

### 「Notionが設定されていません」

```
❌ Notionが設定されていません

実行：/setup-notion
```

**解決策**：
1. `/setup-notion`コマンドを実行
2. または手動で`~/.claude/deep-code-reader/notion_config.json`を編集

### 「コミットが見つかりません」

```
❌ コミットが見つかりません：abc1234
```

**解決策**：
- コミットハッシュが正しいか確認
- 完全なハッシュまたは最低7文字を使用
- コミットがリポジトリに存在するか確認

### 「レート制限超過」

```
⚠️  GitHub APIレート制限

再試行まで：5分
```

**解決策**：
- レート制限のリセットを待つ
- より高い制限のため`GITHUB_TOKEN`環境変数を設定

---

## 次のステップは？

### より多くのコミットを探索
- 異なるコントリビューターからのコミットを分析
- 同様の問題に対する異なるアプローチを比較
- 段階的に理解を構築

### PRを分析
- PR分析を通じて完全な機能を研究
- レビュープロセスを理解
- ディスカッションから学ぶ

### ナレッジベースを構築
- Notionでトピック別にコミットを整理
- タグとリレーションを追加
- サマリーページを作成

### コントリビュート
- 洞察を活用して初めてのコントリビューションを行う
- より良いコミットメッセージを書く
- 学習を他の人と共有

---

## アンインストール

プラットフォームを削除する必要がある場合：

```bash
./uninstall.sh
```

**実行されること：**
- ✅ インストール済みコンポーネントをスキャン
- ✅ 削除されるものを表示
- ✅ 削除前に確認を求める
- ✅ 削除するMCPサーバーを選択可能（対話的）
- ✅ 設定バックアップの復元を提供
- ✅ Notion設定の保持（オプション）

**安全な削除：**
- Notionデータは決して影響を受けません
- Claude設定はバックアップから復元可能
- Notion認証情報は後で保持可能

---

## ヘルプが必要ですか？

- **ドキュメント**：詳細はREADME_ja.mdを参照
- **コマンド**：全てのコマンドには`commands/`に詳細な.mdファイルがあります
- **Issue**：問題は https://github.com/Kuroakira/deep-code-reader/issues で報告してください

---

**楽しく学習を！🚀**

*覚えておいてください：なぜ（WHY）を理解することは、何を（WHAT）知ることよりも重要です。*
